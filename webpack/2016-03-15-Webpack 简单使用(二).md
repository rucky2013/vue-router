前一篇文章大概介绍了Webpack，现在我们来简单的体验一下吧。

####0x00 Webpack配置文件

```javascript
module.exports = {
	//需要先设置入口
	entry: ['./entry.js', './main.js'],

	// 输出
	output: {
	  path: __dirname + './dist/',
	  // entry数组中的文件都会打包成一个文件bundle.js
	  filename: bundle.js
	}
};
```
Webpack支持CMD/AMD规范，兼容性非常强大。

####0x01 模块简单打包
开发中有时候需要将多个页面公用的模块独立打包，从而利用浏览器的缓存机制，提高页面的加载效率，当需要某个功能时，采取动态加载，这时可利用Webpack自带的CommonsChunkPlugin插件。

```javascipt
var webpack = require('webpack');
var CommonsChunkPlugin = webpack.optimize.CommonsChunkPlugin;

module.exports = {
	entry: {
	  a: './a.js', 
	  b: './b.js'
	},
	output: {
	  filename: '[name].js'
	},
	plugins: [new CommonsChunkPlugin('common.js')]
};
```

这时你可以在页面中如下引用:
```javascript
<script src="common.js"></script>
<script src="a.js"></script>
<script src="b.js"></script>
```

####0x02 Webpack 模块加载器
在webpack中JavaScript，CSS，LESS，TypeScript，JSX，CoffeeScript，图片等静态文件都是模块，不同模块的加载是通过模块加载器（webpack-loader）来统一管理的。loaders之间是可以串联的，一个加载器的输出可以作为下一个加载器的输入，最终返回到JavaScript上。loader的配置可以写在配置文件中，通过正则表达式的方式对文件进行匹配，具体可参见下面的示例：

```javascript
$ npm install --save-dev sass-loader css-loader style-loader url-loader
-----------------------------
module: {
  loaders: [{
    test: /\.sass/,
    loader:  'style-loader!css-loader!sass-loader'
  }, {
    test: /\.(png|jpg)$/,
    loader: 'url-loader?limit=10000&name=build/[name].[ext]'
  }]
}
```
loader也支持在js文件中通过require的方式进行加载，只需要在require资源path的前面指定loader，用！来串联不同的loader和资源即可。

```javascript
require(“style!css!less!./mystyles.less”);
```

####0x03 css文件独立打包
在webpack中编写js文件时，可以通过require的方式引入其他的静态资源，可通过loader对文件自动解析并打包文件。通常会将js文件打包合并，css文件会在页面的header中嵌入style的方式载入页面。但开发过程中我们并不想将样式打在脚本中，最好可以独立生成css文件，以外链的形式加载。这时extract-text-webpack-plugin插件可以帮我们达到想要的效果。

```javascript
$ npm install extract-text-webpack-plugin –save-dev

var ExtractTextPlugin = require('extract-text-webpack-plugin');

module.exports = {
	...
	...
	plugins: [new ExtractTextPlugin('style.css')]
};
```

对于图片打包也可通过url-loader实现
```javascript
img{
  background: url(../image/xxx.jpg)
}

---------------------
// 根据loader设置，webpack会将小于1024大小的图片转成base64编码，同时会存在build文件夹下
module: {
  {
    test: /\.(png|jpg)$/,
    loader: 'url-loader?limit=1024&name=build/[name].[ext]'
  }]
}
```
0x04 webpack-dev-server 静态资源服务器
webpack除了可以对模块进行打包，还提供了一个开发服务器.
它有以下特点：
- 基于Express框架的轻量开发服务器
- 静态资源Web服务器
- 开发中会监听文件的变化在内存中实时打包
- 可进行热替换，实现页面的自动刷新

安装
<code>npm install webpack-dev-server -g</code>

可以使用webpack-dev-server直接启动，也可以增加参数来获取更多的功能.

[参考文档:http://webpack.github.io/docs/webpack-dev-server.html](http://webpack.github.io/docs/webpack-dev-server.html)


